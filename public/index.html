<html lang="en">
  <head>
    <link href="https://fonts.googleapis.com/css?family=Fjalla+One|Open+Sans" rel="stylesheet">
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
    <!-- Start Added by Ian -->
    <svg width="960" height="600"></svg>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- End Added by Ian -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <link href="/d3-geomap/css/d3.geomap.css" rel="stylesheet">
    <script src="/d3-geomap/vendor/d3.geomap.dependencies.min.js"></script>
    <script src="/d3-geomap/js/d3.geomap.min.js"></script>

    <script type="text/javascript">
        console.log('ungalo!!!');

        $.getJSON("/data/worldNuclearInventory.json", function(result){
          $.each(result, function(d){
            console.log("-------");
            console.log(d);
            console.log("-------");
          });
        });

        // load the data
        d3.json("/data/worldNuclearInventory.json", function(error, data) {
          console.log(data[0]);


          data.forEach(function(d) {
            console.log(d)
            d.Country = d.Country;
            d.Year = +d.Year;
            d.InventorySize = +d.InventorySize;
          });

          // scale the range of the data
          x.domain(data.map(function(d) { return d.Country; }));
          y.domain([0, d3.max(data, function(d) { return d.InventorySize; })]);

          // add axis
          svg.append("g")
              .attr("class", "x axis")
              .attr("transform", "translate(0," + height + ")")
              .call(xAxis)
            .selectAll("text")
              .style("text-anchor", "end")
              .attr("dx", "-.8em")
              .attr("dy", "-.55em")
              .attr("transform", "rotate(-90)" );

          svg.append("g")
              .attr("class", "y axis")
              .call(yAxis)
            .append("text")
              .attr("transform", "rotate(-90)")
              .attr("y", 5)
              .attr("dy", ".71em")
              .style("text-anchor", "end")
              .text("InventorySize");


          // Add bar chart
          svg.selectAll("bar")
              .data(data)
            .enter().append("rect")
              .attr("class", "bar")
              .attr("x", function(d) { return x(d.Country); })
              .attr("width", x.rangeBand())
              .attr("y", function(d) { return y(d.InventorySize); })
              .attr("height", function(d) { return height - y(d.InventorySize); });

        });
        /*
        var map = d3.geomap().geofile('/topojson/world/countries.json');

        d3.select('#map').call(map.draw, map);
        */
    </script>
  </head>

  <body>
     <div id="map"></div>
  </body>
</html>
